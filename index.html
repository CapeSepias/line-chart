<!doctype html style="height:100%">
<html lang="en" ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>Line chart demo</title>
  <link rel="stylesheet" href="line-chart.css"/>
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"/>
</head>
<body style="height:100%;margin: 0 0;" ng-controller="DemoCtrl">
  <ul class="thumbnails">
    <li ng-repeat="example in examples" class="span4">
      <div class="thumbnail">
        <div style='width:320px;height:200px'>
          <linechart data='example.data' options='example.options'></linechart>
        </div>
      </div>
    </li>
  </ul>
  
  
  <script src="lib/angular.js"></script>
  <script src="lib/d3.v3.min.js"></script>
  <script src="line-chart.js"></script>
  
  <script>
    // THIS CODE IS BAD, AND I SHOULD FEEL BAD
    // Folks, do not try this at home. This code is not tested, and not clean.
    // Its purpose is only to demonstrate what n3-charts.line-chart can do,
    // certainly not to show how proper options and data should be prepared.
    // 
    // -> TL;DR
    // -> Copy-paste of the code below is strongly discouraged.
  
    angular.module('myApp', ['n3-charts.linechart'])
    
    .controller('DemoCtrl', function($scope, utils) {
      $scope.examples = [];
      
      
      $scope.examples.push({
        label: 'Sinus example',
        description: 'Another basic example',
        data: utils.sinData(10, utils.sinSeries(3)),
        options: {
          series: utils.sinSeries(3)
        }
      })
      $scope.examples.push({
        label: 'Simple example',
        description: 'A quite basic example',
        data: [
          {x: 0, value: 4, foo: -2}, {x: 1, value: 8, foo: 22}, {x: 2, value: 15, foo: -1},
          {x: 3, value: 16, foo: 0}, {x: 4, value: 23, foo: -3}, {x: 5, value: 42, foo: -4}
        ],
        options: {
          series: [
            {axis: 'y', y: 'value', color: '#4682b4', type: 'area'},
            {axis: 'y2', y: 'foo', color: 'steelblue', type: 'line'},
            {axis: 'y2', y: 'foo', color: 'steelblue', type: 'column'}
          ]
        }
      });
      
    })

    .factory('utils', function() {
      return {
        sinSeries: function(howMany) {
          var colors = d3.scale.category10();
          
          var series = [];
          
          for (var i = 0; i < howMany; i++) {
            series.push({
              y: 'series_' + i,
              color: colors(i),
              type: 'column'
            });
          }
          
          return series;
        },
        
        sinData: function(rows, series) {
          var data = [];
          
          for (var i = 0; i < series.length; i++) {
            for (var j = 0; j < 50; j++) {
              var row = data[j] || {x: j};
              row[series[i].y] = (Math.sin(j/5))*(5*(i+1));
              data[j] = row;
            }
          }
          
          return data;
        }
      };
    });
  </script>
</body>
</html>
